{% assign galleryName = page.path | galleryname %} 
{% assign gallery = site.data['galleries'][galleryName] %} 

{% assign pictures = "" | split: ',' %} 
{% if gallery.size > 1 %}
  {% for pic in gallery %}
    {% if gallery.first == null %}
    {% elsif pic contains 'logo' %}
    {% else %}
      {% assign pictures = pictures | push: pic %}
    {% endif %}
  {% endfor %}
{% elsif gallery.size == 1  %}
  {% if gallery.first == null %}
  {% elsif gallery.first contains 'logo' %} 
  {% else %}
    {% assign pictures = pictures | push: pic %}
  {% endif %}
{% endif %}

{% if pictures.size > 0 %}
<center>
  {% if pictures.size > 1 %}
  <ul id="lightSlider">
    {% for pic in pictures %}
        <li data-thumb="{{ site.baseurl }}/{{ pic }}">
          {% images {{pic}} %}        
        </li>
    {% endfor %}
  </ul>
  {% else %}
    {% images {{pictures.first}}  git  %}
  {% endif %}
 </center>
 {% endif %}

{% if pictures.size > 1 %}

<script type="text/javascript">
var initialized = false;

$(document).ready(function() {
  var inview = new Waypoint.Inview({
    element: document.getElementById('lightSlider'),
    enter: function(direction) {
      initializeGallery();
    }
  });
});

function initializeGallery() {
  if(initialized) return;
  
  initialized = true;

  $('#lightSlider').lightSlider({
    gallery: true,
    pager: true,
    controls: false,
    thumbItem: 8,
    item: 1,
    loop: false,
    slideMargin: 0,
    autoWidth: true,
    adaptiveHeight: true,
    mode: "fade",
    useCSS: true,
    cssEasing: 'ease',
    easing: 'linear'
  });
}
</script>
{% endif %}